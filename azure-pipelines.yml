trigger:
- main

pool:
  vmImage: 'windows-latest'

variables:
  solution: 'P2Project/P2Angular'
  buildPlatform: 'Any CPU'
  buildConfiguration: 'Release'

stages:


- stage: DeployAngular
  jobs:
  - job:
    steps:    
    - task: NodeTool@0
      inputs:
        versionSpec: '14.x'
      displayName: 'Install Node.js'

    - script: |
        cd '$(System.DefaultWorkingDirectory)/P2Angular'
        npm install -g @angular/cli
        npm install
        ng build
    - task: AzureRmWebAppDeployment@4
      inputs:
        ConnectionType: 'AzureRM'
        azureSubscription: 'P2(6b99bb29-57fd-4673-b918-0d515335b837)'
        appType: 'webApp'
        WebAppName: 'PokeLoot'
        packageForLinux: '$(System.DefaultWorkingDirectory)/**/*.zip'
